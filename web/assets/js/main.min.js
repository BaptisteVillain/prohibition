"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}console.log("mdr");var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Framework=function(){function t(e,i){var n=this;_classCallCheck(this,t),this.container=e,this.fixed=i,this.container_story=e.querySelector(".container--story"),this.timeline=document.querySelector(".timeline"),this.buttons_next=document.querySelectorAll(".next"),this.buttons_prev=document.querySelectorAll(".prev"),this.sections=e.querySelectorAll(".container--section, .container--story--row-civil .container--story--section"),this.button_scroll=document.querySelector(".fixed-vertical-control"),this.current_index=0,this.previous_index=void 0,this.current_chapter=0,this.current_section=0,this.previous_section=0,this.chapters=document.querySelectorAll(".timeline--part"),this.chapter_prev=document.querySelectorAll(".chapter-prev"),this.chapter_next=document.querySelectorAll(".chapter-next"),this.timeline=document.querySelector(".timeline"),this.timelines_fill=document.querySelectorAll(".timeline--container--seek-bar-fill"),this.buttons_sections=document.querySelectorAll(".timeline--container--pin"),this.previous_button=void 0,this.button_split=document.querySelector(".mafia-scroll"),this.buttons_prev.forEach(function(t){var e=this;t.addEventListener("click",function(t){t.preventDefault(),e.current_index>0&&(e.previous_index=e.current_index,e.current_index-=1,e.select())})},this),this.buttons_next.forEach(function(t){var e=this;t.addEventListener("click",function(t){t.preventDefault(),e.current_index<e.sections.length-1&&(e.previous_index=e.current_index,e.current_index+=1,e.select(),e.current_index>=3&&(e.current_section=(e.current_index-3)%4,3==e.previous_section&&0==e.current_section?(e.current_chapter+=1,e.timeline.style.transform="translateX(-"+100*e.current_chapter+"vw)",e.buttons_sections.forEach(function(t){t.classList.remove("active")},e),e.timelines_fill[e.current_chapter].style.transform="scaleX("+e.buttons_sections[3*e.current_chapter].getBoundingClientRect().left/window.innerWidth+")",e.buttons_sections[3*e.current_chapter].classList.add("active")):e.current_section>=1&&e.current_section<=3&&(e.buttons_sections.forEach(function(t){t.classList.remove("active")},e),e.timelines_fill[e.current_chapter].style.transform="scaleX("+e.buttons_sections[3*e.current_chapter+e.current_section-1].getBoundingClientRect().left/window.innerWidth+")",e.buttons_sections[3*e.current_chapter+e.current_section-1].classList.add("active")),e.previous_section=e.current_section))})},this),this.button_scroll.addEventListener("click",function(t){t.preventDefault(),n.container_story.classList.toggle("scrolled")}),this.chapter_prev.forEach(function(t){var e=this;t.addEventListener("click",function(t){t.preventDefault(),e.current_chapter>=0&&(e.previous_chapter=e.current_chapter,e.current_index=4*e.current_chapter+3,e.selectChapter())})},this),this.chapter_next.forEach(function(t){var e=this;t.addEventListener("click",function(t){t.preventDefault(),e.current_chapter<e.chapters.length-1&&(e.current_chapter+=1,e.current_index=4*e.current_chapter+3,e.selectChapter())})},this);var r=this;this.buttons_sections.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),r.current_index=Math.floor(this.dataset.target)+4*r.current_chapter+3,r.previous_section=this.dataset.target,r.buttons_sections.forEach(function(t){t.classList.remove("active")},this),this.classList.add("active"),r.timelines_fill[r.current_chapter].style.transform="scaleX("+this.getBoundingClientRect().left/window.innerWidth+")",r.select()})},this),this.button_split.addEventListener("click",function(){n.container_story.style.transition="none",n.container_story.classList.add("scrolled"),n.container_story.style.transition="transform .65s ease-in-out"})}return _createClass(t,[{key:"selectChapter",value:function(){this.timeline.style.transform="translateX(-"+100*this.current_chapter+"vw)",this.buttons_sections.forEach(function(t){t.classList.remove("active")},this),this.timelines_fill[this.current_chapter].style.transform="scaleX("+this.buttons_sections[3*this.current_chapter].getBoundingClientRect().left/window.innerWidth+")",this.buttons_sections[3*this.current_chapter].classList.add("active"),this.select()}},{key:"select",value:function(){this.container.style.transform="translateX(-"+100*this.current_index+"vw)",this.sections[this.current_index].classList.contains("hide-fixed")?this.fixed.classList.add("hide"):this.fixed.classList.remove("hide")}}]),t}(),framework=new Framework(document.querySelector(".container"),document.querySelector(".fixed")),_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),test=[[11,1],[12,7],[13,3],[17,5],[22,1],[78,6],[89,3],[90,8]],Graph=function(){function t(e,i,n){_classCallCheck(this,t),this.array=i,this.parent=e,this.type=n,this.findMaxMin(this.array),this.draw(this.parent,this.array,this.type,this.X,this.Y)}return _createClass(t,[{key:"findMaxMin",value:function(t){this.X={max:0,min:null},this.Y={max:0,min:null};for(var e=0;e<t.length;e++)null===this.X.min&&(this.X.min=t[e][0]),null===this.Y.min&&(this.X.min=t[e][1]),t[e][0]<=this.X.min&&(this.X.min=t[e][0]),t[e][0]>=this.X.max&&(this.X.max=t[e][0]),t[e][1]<=this.Y.min&&(this.Y.min=t[e][1]),t[e][1]>=this.Y.max&&(this.Y.max=t[e][1])}},{key:"draw",value:function(t,e,i,n,r){this.div=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.div.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.div.setAttribute("width","100%"),this.div.setAttribute("height","100%"),this.div.setAttribute("class","graph");var s=t.offsetWidth/e.length,c=s/2;switch(i){case 1:for(var o=0;o<e.length;o++){var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.style.transform="translate("+(o*s+c)+"px, 0)",a.setAttribute("fill","blue"),a.setAttribute("height",e[o][1]/r.max*t.offsetHeight),a.setAttribute("width",2),a.setAttribute("y",t.offsetHeight-e[o][1]/r.max*t.offsetHeight*.8),this.div.appendChild(a)}break;case 2:var l=document.createElementNS("http://www.w3.org/2000/svg","polyline");l.setAttribute("fill","none"),l.setAttribute("stroke","blue"),l.setAttribute("stroke-width","2");for(var u=document.createElementNS("http://www.w3.org/2000/svg","g"),h=new String,d=0;d<e.length;d++){h+=d*s+c,h+=",",h+=t.offsetHeight-e[d][1]/r.max*t.offsetHeight*.8,h+=" ";var f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.setAttribute("cx",d*s+c),f.setAttribute("cy",t.offsetHeight-e[d][1]/r.max*t.offsetHeight*.8),f.setAttribute("r","4"),u.appendChild(f)}l.setAttribute("points",h),this.div.appendChild(u),this.div.appendChild(l)}t.appendChild(this.div)}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJDbGFzcy9GcmFtZXdvcmsuanMiLCJDbGFzcy9HcmFwaC5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiRnJhbWV3b3JrIiwiY29udGFpbmVyIiwiZml4ZWQiLCJfdGhpczMiLCJ0aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiY29udGFpbmVyX3N0b3J5IiwicXVlcnlTZWxlY3RvciIsInRpbWVsaW5lIiwiZG9jdW1lbnQiLCJidXR0b25zX25leHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uc19wcmV2Iiwic2VjdGlvbnMiLCJidXR0b25fc2Nyb2xsIiwiY3VycmVudF9pbmRleCIsInByZXZpb3VzX2luZGV4IiwidW5kZWZpbmVkIiwiY3VycmVudF9jaGFwdGVyIiwiY3VycmVudF9zZWN0aW9uIiwicHJldmlvdXNfc2VjdGlvbiIsImNoYXB0ZXJzIiwiY2hhcHRlcl9wcmV2IiwiY2hhcHRlcl9uZXh0IiwidGltZWxpbmVzX2ZpbGwiLCJidXR0b25zX3NlY3Rpb25zIiwicHJldmlvdXNfYnV0dG9uIiwiYnV0dG9uX3NwbGl0IiwiZm9yRWFjaCIsImJ1dHRvbiIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGVjdCIsIl90aGlzMiIsImxlbmd0aCIsInN0eWxlIiwidHJhbnNmb3JtIiwiZWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiYWRkIiwidG9nZ2xlIiwiX3RoaXM0IiwicHJldmlvdXNfY2hhcHRlciIsInNlbGVjdENoYXB0ZXIiLCJfdGhpczUiLCJ0aGF0IiwiTWF0aCIsImZsb29yIiwiZGF0YXNldCIsInRhcmdldCIsInRyYW5zaXRpb24iLCJjb250YWlucyIsImZyYW1ld29yayIsInRlc3QiLCJHcmFwaCIsInBhcmVudCIsImFycmF5IiwidHlwZSIsImZpbmRNYXhNaW4iLCJkcmF3IiwiWCIsIlkiLCJtYXgiLCJtaW4iLCJpIiwiZGl2IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImFkanVzdCIsInJlY3QiLCJvZmZzZXRIZWlnaHQiLCJhcHBlbmRDaGlsZCIsInBvbHlsaW5lIiwiZyIsInN0cmluZyIsIlN0cmluZyIsImNpcmNsZSJdLCJtYXBwaW5ncyI6InFPQUFBQSxRQUFRQyxJQUFJLDJRQ0FOQyxVQUFBQSxXQUNKLFNBQUFBLEVBQVlDLEVBQVdDLEdBQU0sSUFBQUMsRUFBQUMsS0FBQUMsZ0JBQUFELEtBQUFKLEdBQzNCSSxLQUFLSCxVQUFtQkEsRUFDeEJHLEtBQUtGLE1BQW1CQSxFQUN4QkUsS0FBS0UsZ0JBQW1CTCxFQUFVTSxjQUFjLHFCQUNoREgsS0FBS0ksU0FBbUJDLFNBQVNGLGNBQWMsYUFDL0NILEtBQUtNLGFBQW1CRCxTQUFTRSxpQkFBaUIsU0FDbERQLEtBQUtRLGFBQW1CSCxTQUFTRSxpQkFBaUIsU0FDbERQLEtBQUtTLFNBQW1CWixFQUFVVSxpQkFBaUIsZ0ZBQ25EUCxLQUFLVSxjQUFtQkwsU0FBU0YsY0FBYywyQkFFL0NILEtBQUtXLGNBQW1CLEVBQ3hCWCxLQUFLWSxvQkFBbUJDLEVBRXhCYixLQUFLYyxnQkFBbUIsRUFFeEJkLEtBQUtlLGdCQUFtQixFQUN4QmYsS0FBS2dCLGlCQUFtQixFQUV4QmhCLEtBQUtpQixTQUFtQlosU0FBU0UsaUJBQWlCLG1CQUNsRFAsS0FBS2tCLGFBQW1CYixTQUFTRSxpQkFBaUIsaUJBQ2xEUCxLQUFLbUIsYUFBbUJkLFNBQVNFLGlCQUFpQixpQkFDbERQLEtBQUtJLFNBQW1CQyxTQUFTRixjQUFjLGFBQy9DSCxLQUFLb0IsZUFBbUJmLFNBQVNFLGlCQUFpQix1Q0FDbERQLEtBQUtxQixpQkFBbUJoQixTQUFTRSxpQkFBaUIsNkJBQ2xEUCxLQUFLc0IscUJBQW1CVCxFQUV4QmIsS0FBS3VCLGFBQW1CbEIsU0FBU0YsY0FBYyxpQkFFL0NILEtBQUtRLGFB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QixFQUFPaUIsYUFBaUJoQixFQUFNUSxHQUFHLEdBQUtILEVBQUVDLElBQU9QLEVBQU9pQixhQUFlLEdBQ2hGSSxHQUFVLElBRVYsSUFBSUUsRUFBUzVFLFNBQVNnRSxnQkFBZ0IsNkJBQThCLFVBQ3BFWSxFQUFPWCxhQUFhLEtBQVFILEVBQUlJLEVBQVNFLEdBQ3pDUSxFQUFPWCxhQUFhLEtBQU9aLEVBQU9pQixhQUFpQmhCLEVBQU1RLEdBQUcsR0FBS0gsRUFBRUMsSUFBT1AsRUFBT2lCLGFBQWUsSUFDaEdNLEVBQU9YLGFBQWEsSUFBSyxLQUV6QlEsRUFBRUYsWUFBWUssR0FHaEJKLEVBQVNQLGFBQWEsU0FBVVMsR0FFaEMvRSxLQUFLb0UsSUFBSVEsWUFBWUUsR0FDckI5RSxLQUFLb0UsSUFBSVEsWUFBWUMsR0FJekJuQixFQUFPa0IsWUFBWTVFLEtBQUtvRSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKCdtZHInKSIsImNsYXNzIEZyYW1ld29ya3tcbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBmaXhlZCl7XG4gICAgdGhpcy5jb250YWluZXIgICAgICAgID0gY29udGFpbmVyXG4gICAgdGhpcy5maXhlZCAgICAgICAgICAgID0gZml4ZWRcbiAgICB0aGlzLmNvbnRhaW5lcl9zdG9yeSAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lci0tc3RvcnknKVxuICAgIHRoaXMudGltZWxpbmUgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lbGluZScpXG4gICAgdGhpcy5idXR0b25zX25leHQgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5leHQnKVxuICAgIHRoaXMuYnV0dG9uc19wcmV2ICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmV2JylcbiAgICB0aGlzLnNlY3Rpb25zICAgICAgICAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRhaW5lci0tc2VjdGlvbiwgLmNvbnRhaW5lci0tc3RvcnktLXJvdy1jaXZpbCAuY29udGFpbmVyLS1zdG9yeS0tc2VjdGlvbicpXG4gICAgdGhpcy5idXR0b25fc2Nyb2xsICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpeGVkLXZlcnRpY2FsLWNvbnRyb2wnKVxuICAgIFxuICAgIHRoaXMuY3VycmVudF9pbmRleCAgICA9IDBcbiAgICB0aGlzLnByZXZpb3VzX2luZGV4ICAgPSB1bmRlZmluZWRcbiAgICBcbiAgICB0aGlzLmN1cnJlbnRfY2hhcHRlciAgPSAwXG5cbiAgICB0aGlzLmN1cnJlbnRfc2VjdGlvbiAgPSAwXG4gICAgdGhpcy5wcmV2aW91c19zZWN0aW9uID0gMFxuXG4gICAgdGhpcy5jaGFwdGVycyAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVsaW5lLS1wYXJ0JylcbiAgICB0aGlzLmNoYXB0ZXJfcHJldiAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcHRlci1wcmV2JylcbiAgICB0aGlzLmNoYXB0ZXJfbmV4dCAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcHRlci1uZXh0JylcbiAgICB0aGlzLnRpbWVsaW5lICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZWxpbmUnKVxuICAgIHRoaXMudGltZWxpbmVzX2ZpbGwgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZS0tY29udGFpbmVyLS1zZWVrLWJhci1maWxsJylcbiAgICB0aGlzLmJ1dHRvbnNfc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGltZWxpbmUtLWNvbnRhaW5lci0tcGluJylcbiAgICB0aGlzLnByZXZpb3VzX2J1dHRvbiAgPSB1bmRlZmluZWRcblxuICAgIHRoaXMuYnV0dG9uX3NwbGl0ICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWZpYS1zY3JvbGwnKVxuXG4gICAgdGhpcy5idXR0b25zX3ByZXYuZm9yRWFjaChmdW5jdGlvbihidXR0b24pIHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKSAgICBcbiAgICAgICAgaWYodGhpcy5jdXJyZW50X2luZGV4ID4gMCl7XG4gICAgICAgICAgdGhpcy5wcmV2aW91c19pbmRleCA9IHRoaXMuY3VycmVudF9pbmRleCAgICBcbiAgICAgICAgICB0aGlzLmN1cnJlbnRfaW5kZXggLT0gMVxuICAgICAgICAgIHRoaXMuc2VsZWN0KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCB0aGlzKVxuXG4gICAgdGhpcy5idXR0b25zX25leHQuZm9yRWFjaChmdW5jdGlvbihidXR0b24pIHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBpZih0aGlzLmN1cnJlbnRfaW5kZXggPCB0aGlzLnNlY3Rpb25zLmxlbmd0aCAtIDEpe1xuICAgICAgICAgIHRoaXMucHJldmlvdXNfaW5kZXggPSB0aGlzLmN1cnJlbnRfaW5kZXhcbiAgICAgICAgICB0aGlzLmN1cnJlbnRfaW5kZXggKz0gMVxuICAgICAgICAgIHRoaXMuc2VsZWN0KClcblxuICAgICAgICAgIGlmKHRoaXMuY3VycmVudF9pbmRleCA+PSAzICl7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRfc2VjdGlvbiAgPSAodGhpcy5jdXJyZW50X2luZGV4IC0gMykgJSA0XG4gICAgICAgICAgICBpZih0aGlzLnByZXZpb3VzX3NlY3Rpb24gPT0gMyAmJiB0aGlzLmN1cnJlbnRfc2VjdGlvbiA9PSAwKXtcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X2NoYXB0ZXIgKz0gMVxuICAgICAgICAgICAgICB0aGlzLnRpbWVsaW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nKyAodGhpcy5jdXJyZW50X2NoYXB0ZXIgKiAxMDApICsndncpJ1xuXG4gICAgICAgICAgICAgIHRoaXMuYnV0dG9uc19zZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgICB0aGlzLnRpbWVsaW5lc19maWxsW3RoaXMuY3VycmVudF9jaGFwdGVyXS5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKCcrICh0aGlzLmJ1dHRvbnNfc2VjdGlvbnNbMyAqIHRoaXMuY3VycmVudF9jaGFwdGVyXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC8gd2luZG93LmlubmVyV2lkdGgpICsnKSdcbiAgICAgICAgICAgICAgdGhpcy5idXR0b25zX3NlY3Rpb25zWzMgKiB0aGlzLmN1cnJlbnRfY2hhcHRlcl0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50X3NlY3Rpb24gPj0gMSAmJiB0aGlzLmN1cnJlbnRfc2VjdGlvbiA8PSAzKXsgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc19zZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudGltZWxpbmVzX2ZpbGxbdGhpcy5jdXJyZW50X2NoYXB0ZXJdLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoJysgKHRoaXMuYnV0dG9uc19zZWN0aW9uc1szICogdGhpcy5jdXJyZW50X2NoYXB0ZXIgKyB0aGlzLmN1cnJlbnRfc2VjdGlvbiAtMV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAvIHdpbmRvdy5pbm5lcldpZHRoKSArJyknXG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b25zX3NlY3Rpb25zWzMgKiB0aGlzLmN1cnJlbnRfY2hhcHRlciArIHRoaXMuY3VycmVudF9zZWN0aW9uLTFdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNfc2VjdGlvbiA9IHRoaXMuY3VycmVudF9zZWN0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIHRoaXMpXG5cbiAgICB0aGlzLmJ1dHRvbl9zY3JvbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLmNvbnRhaW5lcl9zdG9yeS5jbGFzc0xpc3QudG9nZ2xlKCdzY3JvbGxlZCcpXG4gICAgfSlcblxuXG4gICAgdGhpcy5jaGFwdGVyX3ByZXYuZm9yRWFjaChmdW5jdGlvbihidXR0b24pIHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKSAgICBcbiAgICAgICAgaWYodGhpcy5jdXJyZW50X2NoYXB0ZXIgPj0gMCl7XG4gICAgICAgICAgdGhpcy5wcmV2aW91c19jaGFwdGVyID0gdGhpcy5jdXJyZW50X2NoYXB0ZXIgICAgIFxuICAgICAgICAgIHRoaXMuY3VycmVudF9pbmRleCA9IHRoaXMuY3VycmVudF9jaGFwdGVyICogNCArIDNcbiAgICAgICAgICB0aGlzLnNlbGVjdENoYXB0ZXIoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIHRoaXMpXG5cbiAgICB0aGlzLmNoYXB0ZXJfbmV4dC5mb3JFYWNoKGZ1bmN0aW9uKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGlmKHRoaXMuY3VycmVudF9jaGFwdGVyIDwgdGhpcy5jaGFwdGVycy5sZW5ndGggLSAxKXtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRfY2hhcHRlciArPSAxXG4gICAgICAgICAgdGhpcy5jdXJyZW50X2luZGV4ID0gdGhpcy5jdXJyZW50X2NoYXB0ZXIgKiA0ICsgM1xuICAgICAgICAgIHRoaXMuc2VsZWN0Q2hhcHRlcigpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgdGhpcylcblxuICAgIFxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXG4gICAgdGhpcy5idXR0b25zX3NlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oYnV0dG9uKSB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHRoYXQuY3VycmVudF9pbmRleCA9IE1hdGguZmxvb3IodGhpcy5kYXRhc2V0LnRhcmdldCkgKyAodGhhdC5jdXJyZW50X2NoYXB0ZXIgKiA0KSArIDNcbiAgICAgICAgdGhhdC5wcmV2aW91c19zZWN0aW9uID0gdGhpcy5kYXRhc2V0LnRhcmdldFxuXG4gICAgICAgIHRoYXQuYnV0dG9uc19zZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgdGhhdC50aW1lbGluZXNfZmlsbFt0aGF0LmN1cnJlbnRfY2hhcHRlcl0uc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgnKyAodGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC8gd2luZG93LmlubmVyV2lkdGgpICsnKSdcblxuICAgICAgICB0aGF0LnNlbGVjdCgpXG4gICAgICB9KVxuICAgIH0sIHRoaXMpXG5cbiAgICB0aGlzLmJ1dHRvbl9zcGxpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY29udGFpbmVyX3N0b3J5LnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSdcbiAgICAgIHRoaXMuY29udGFpbmVyX3N0b3J5LmNsYXNzTGlzdC5hZGQoJ3Njcm9sbGVkJylcbiAgICAgIHRoaXMuY29udGFpbmVyX3N0b3J5LnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtIC42NXMgZWFzZS1pbi1vdXQnICAgICBcbiAgICB9KVxuXG5cbiAgfVxuXG4gIHNlbGVjdENoYXB0ZXIoKXtcbiAgICB0aGlzLnRpbWVsaW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nKyAodGhpcy5jdXJyZW50X2NoYXB0ZXIgKiAxMDApICsndncpJ1xuXG4gICAgdGhpcy5idXR0b25zX3NlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICB9LCB0aGlzKTtcbiAgICB0aGlzLnRpbWVsaW5lc19maWxsW3RoaXMuY3VycmVudF9jaGFwdGVyXS5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKCcrICh0aGlzLmJ1dHRvbnNfc2VjdGlvbnNbMyAqIHRoaXMuY3VycmVudF9jaGFwdGVyXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC8gd2luZG93LmlubmVyV2lkdGgpICsnKSdcbiAgICB0aGlzLmJ1dHRvbnNfc2VjdGlvbnNbMyAqIHRoaXMuY3VycmVudF9jaGFwdGVyXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuXG4gICAgdGhpcy5zZWxlY3QoKVxuICB9XG5cbiAgc2VsZWN0KCl7XG4gICAgdGhpcy5jb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoLScrICh0aGlzLmN1cnJlbnRfaW5kZXggKiAxMDApICsndncpJ1xuICAgIGlmKHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50X2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUtZml4ZWQnKSl7XG4gICAgICB0aGlzLmZpeGVkLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy5maXhlZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJykgICAgICBcbiAgICB9XG4gIH1cblxufVxuXG5jb25zdCBmcmFtZXdvcmsgPSBuZXcgRnJhbWV3b3JrKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpeGVkJykpIiwibGV0IHRlc3QgPSBbWzExLCAxXSwgWzEyLCA3XSwgWzEzLCAzXSwgWzE3LCA1XSwgWzIyLCAxXSwgWzc4LCA2XSwgWzg5LCAzXSwgWzkwLCA4XV1cblxuY2xhc3MgR3JhcGgge1xuICBjb25zdHJ1Y3RvcihwYXJlbnQsIGFycmF5LCB0eXBlKSB7XG4gICAgdGhpcy5hcnJheSA9IGFycmF5XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnRcbiAgICB0aGlzLnR5cGUgPSB0eXBlXG5cbiAgICB0aGlzLmZpbmRNYXhNaW4odGhpcy5hcnJheSlcblxuICAgIHRoaXMuZHJhdyh0aGlzLnBhcmVudCwgdGhpcy5hcnJheSwgdGhpcy50eXBlLCB0aGlzLlgsIHRoaXMuWSlcbiAgfVxuXG4gIGZpbmRNYXhNaW4oYXJyYXkpIHtcbiAgICB0aGlzLlggPSB7XG4gICAgICBtYXg6IDAsXG4gICAgICBtaW46IG51bGxcbiAgICB9XG4gICAgdGhpcy5ZID0ge1xuICAgICAgbWF4OiAwLFxuICAgICAgbWluOiBudWxsXG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLlgubWluID09PSBudWxsKSB0aGlzLlgubWluID0gYXJyYXlbaV1bMF1cbiAgICAgIGlmICh0aGlzLlkubWluID09PSBudWxsKSB0aGlzLlgubWluID0gYXJyYXlbaV1bMV1cbiAgICAgIGlmIChhcnJheVtpXVswXSA8PSB0aGlzLlgubWluKSB0aGlzLlgubWluID0gYXJyYXlbaV1bMF1cbiAgICAgIGlmIChhcnJheVtpXVswXSA+PSB0aGlzLlgubWF4KSB0aGlzLlgubWF4ID0gYXJyYXlbaV1bMF1cbiAgICAgIGlmIChhcnJheVtpXVsxXSA8PSB0aGlzLlkubWluKSB0aGlzLlkubWluID0gYXJyYXlbaV1bMV1cbiAgICAgIGlmIChhcnJheVtpXVsxXSA+PSB0aGlzLlkubWF4KSB0aGlzLlkubWF4ID0gYXJyYXlbaV1bMV1cbiAgICB9XG4gIH1cblxuICBkcmF3KHBhcmVudCwgYXJyYXksIHR5cGUsIFgsIFkpIHtcblxuICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIilcbiAgICB0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoXCJ4bWxuc1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIpXG4gICAgdGhpcy5kaXYuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIxMDAlXCIpXG4gICAgdGhpcy5kaXYuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMTAwJVwiKVxuICAgIHRoaXMuZGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZ3JhcGhcIilcblxuICAgIGxldCB3aWR0aCA9IHBhcmVudC5vZmZzZXRXaWR0aCAvIGFycmF5Lmxlbmd0aFxuICAgIGxldCBhZGp1c3QgPSB3aWR0aCAvIDJcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIilcbiAgICAgICAgICByZWN0LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKFwiICsgKChpICogd2lkdGgpICsgYWRqdXN0KSArIFwicHgsIDApXCJcbiAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJibHVlXCIpXG4gICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgKGFycmF5W2ldWzFdIC8gWS5tYXgpICogcGFyZW50Lm9mZnNldEhlaWdodClcbiAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIDIpXG4gICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIHBhcmVudC5vZmZzZXRIZWlnaHQgLSAoKGFycmF5W2ldWzFdIC8gWS5tYXgpICogcGFyZW50Lm9mZnNldEhlaWdodCAqIDAuOCkpXG4gICAgICAgICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQocmVjdClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAyOlxuICAgICAgICBsZXQgcG9seWxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBvbHlsaW5lXCIpXG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJub25lXCIpXG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcImJsdWVcIilcbiAgICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMlwiKVxuXG4gICAgICAgIGxldCBnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJnXCIpXG5cbiAgICAgICAgbGV0IHN0cmluZyA9IG5ldyBTdHJpbmcoKVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzdHJpbmcgKz0gKChpICogd2lkdGgpICsgYWRqdXN0KVxuICAgICAgICAgIHN0cmluZyArPSBcIixcIlxuICAgICAgICAgIHN0cmluZyArPSAocGFyZW50Lm9mZnNldEhlaWdodCAtICgoYXJyYXlbaV1bMV0gLyBZLm1heCkgKiBwYXJlbnQub2Zmc2V0SGVpZ2h0ICogMC44KSlcbiAgICAgICAgICBzdHJpbmcgKz0gXCIgXCJcblxuICAgICAgICAgIGxldCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImNpcmNsZVwiKVxuICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeFwiLCAoKGkgKiB3aWR0aCkgKyBhZGp1c3QpKVxuICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeVwiLCAocGFyZW50Lm9mZnNldEhlaWdodCAtICgoYXJyYXlbaV1bMV0gLyBZLm1heCkgKiBwYXJlbnQub2Zmc2V0SGVpZ2h0ICogMC44KSkpXG4gICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInJcIiwgXCI0XCIpXG5cbiAgICAgICAgICBnLmFwcGVuZENoaWxkKGNpcmNsZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInBvaW50c1wiLCBzdHJpbmcpXG5cbiAgICAgICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQoZylcbiAgICAgICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQocG9seWxpbmUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZGl2KVxuICB9XG59XG5cbi8vY29uc3QgZ3JhcGhfdGVzdCA9IG5ldyBHcmFwaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lci1ncmFwaFwiKSwgdGVzdCwgMilcbiJdfQ==
